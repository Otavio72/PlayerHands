<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>MediaPipe Hands - Histórico de Coordenadas</title>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
</head>
<body>
<video id="input_video" style="display:none;"></video>
<script>
const videoElement = document.getElementById('input_video');

const hands = new Hands({
  locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
});

hands.setOptions({
  maxNumHands: 1,
  modelComplexity: 0,
  minDetectionConfidence: 0.7,
  minTrackingConfidence: 0.5
});

// Histórico de 5 coordenadas para indicador e polegar
const historico = {
  indicador: {x: [], y: [], z: []},
  polegar: {x: [], y: [], z: []}
};
const maxHistory = 5;

hands.onResults(results => {
  if (results.multiHandLandmarks) {
    const landmarks = results.multiHandLandmarks[0];
    const indicador = landmarks[8]; // ponta do indicador
    const polegar = landmarks[4];   // ponta do polegar

    // Atualiza histórico do indicador
    ['x','y','z'].forEach(coord => {
      historico.indicador[coord].push(indicador[coord]);
      if (historico.indicador[coord].length > maxHistory) historico.indicador[coord].shift();
    });

    // Atualiza histórico do polegar
    ['x','y','z'].forEach(coord => {
      historico.polegar[coord].push(polegar[coord]);
      if (historico.polegar[coord].length > maxHistory) historico.polegar[coord].shift();
    });

    console.clear();
    console.log("Histórico do indicador:");
    console.table(historico.indicador);
    console.log("Histórico do polegar:");
    console.table(historico.polegar);
  }
});

// Inicializa câmera
const camera = new Camera(videoElement, {
  onFrame: async () => { await hands.send({image: videoElement}); },
  width: 640,
  height: 480
});
camera.start();
</script>
</body>
</html>
